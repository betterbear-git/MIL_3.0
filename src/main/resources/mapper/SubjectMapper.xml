<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.starter.dao.cilDAO">

    <select id="subjectList" resultType="com.spring.starter.model.cilDTO">
				select cp.*,ms.name,ms.is_mandatory
				  from mil_db.cil_position cp
		    inner join mil_db.mil_subject ms
				    on cp.subject = ms.code
			  order by cp.row_id, cp.col_id;
		</select>

	<select id="subjectDetailList" resultType="com.spring.starter.model.cilDetailDTO" parameterType="map">
		select cp.*,ms.*
		from mil_db.cil_position cp
		inner join mil_db.mil_subject ms
		on cp.subject = ms.code
		<where>
			<if test="value != null">AND cp.subject = #{subject} </if>
		</where>
	</select>
	<select id="jobList" resultType="com.spring.starter.model.jobDTO">
		select jobs.*
		from mil_db.jobs jobs
		<where>
			<if test="value != null">AND cp.job_id = #{jobs_id} </if>
		</where>
	</select>
	<select id="subjectTrackList" resultType="com.spring.starter.model.cilTrackDTO" parameterType="map">
		select cp.col_id ,cp.row_id ,cp.subject, cs.page_id, cs.type
		from mil_db.cil_position cp join mil_db.cil_subjectcore cs
		on cp.subject = cs.subject
		<where>
			<if test="value != null">AND cs.page_id = #{page_id} </if>
		</where>
	</select>
</mapper>